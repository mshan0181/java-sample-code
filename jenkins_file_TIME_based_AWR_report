node ('master') {
     stage('Code_checkout') {
     git url: 'https://github.com/mshan0181/java-sample-code.git'
       }    
  stage('SQL_script_runner_AWR_report') {  
            // Define an integer variable
        def dbidvar = 2940744064
         echo  dbidvar
        def instnumvar = 1
          echo instnum_var
        def begidvar = 249
          echo begid_var
        def endidvar = 251
            echo end_id_var
              bat 'echo define DB_ID=%dbidvar% > AWR_SQL_temp2.sql' 
              bat 'echo define INSTANCE_NO=%instnumvar% >> AWR_SQL_temp2.sql'
              bat 'echo define BEGIN_ID=%begidvar% >> AWR_SQL_temp2.sql'
              bat 'echo define END_ID=%endidvar% >> AWR_SQL_temp2.sql'
              bat 'type AWR_report.sql >> AWR_SQL_temp2.sql'
            step([$class: 'SQLPlusRunnerBuilder',credentialsId:'shandb-priv-id', instance:'client_access',scriptType:'file', script: 'AWR_SQL_temp2.sql',scriptContent: '']) 
           } 
     stage ('generate report') {
              publishHTML (target: [
              allowMissing: true,
              alwaysLinkToLastBuild: true,
              keepAll: true,
              reportDir: '',
              reportFiles: 'awr_from_console.html',
              reportName: "AWR-Report-for-Oracle-Database"
              ])
           }
  }
